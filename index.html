
<!DOCTYPE html>
<html lang="it">
<head>
    <base href="./">

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" type="image/ico" href="/static/favicon.ico"/>
    <title>Lettore Rassegna Stampa</title>
    <meta name="csrf-token" content="LEwFDdZVeVAZZsBJlxzWb2lRMdtTn49ygiNV1S9xYLOZTp5pZTIQEn4YZBDXjSp7">
    <input type="hidden" name="csrfmiddlewaretoken" value="LEwFDdZVeVAZZsBJlxzWb2lRMdtTn49ygiNV1S9xYLOZTp5pZTIQEn4YZBDXjSp7">
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
            color: #333;
        }
        
        .header {
            background: #2c3e50;
            color: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .review-info {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .controls {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .content {
            background: white;
            padding: 20px;
            border-radius: 10px;
            line-height: 1.6;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .btn {
            background: #3498db;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            margin: 5px;
            transition: background 0.3s;
        }
        
        .btn:hover {
            background: #2980b9;
        }
        
        .btn:disabled {
            background: #bdc3c7;
            cursor: not-allowed;
        }
        
        .btn.danger {
            background: #e74c3c;
        }
        
        .btn.danger:hover {
            background: #c0392b;
        }
        
        .btn.success {
            background: #27ae60;
        }
        
        .btn.success:hover {
            background: #229954;
        }
        
        .control-group {
            margin: 10px 0;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .control-group label {
            min-width: 100px;
            font-weight: bold;
        }
        
        .control-group input[type="range"] {
            flex: 1;
            margin: 0 10px;
        }
        
        .control-group span {
            min-width: 60px;
            text-align: center;
            font-weight: bold;
        }
        
        .status {
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
            text-align: center;
            font-weight: bold;
        }
        
        .status.info {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .status.warning {
            background: #fff3cd;
            color: #856404;
            border: 1px solid #ffeaa7;
        }
        
        .status.error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        
        .voice-selector {
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 14px;
        }
        
        .progress-bar {
            width: 100%;
            height: 20px;
            background: #ecf0f1;
            border-radius: 10px;
            overflow: hidden;
            margin: 10px 0;
        }
        
        .progress-fill {
            height: 100%;
            background: #3498db;
            width: 0%;
            transition: width 0.3s;
        }
        
        .reading-text {
            background: #fff3cd;
            padding: 2px 4px;
            border-radius: 3px;
        }
        
        /* Stili Calendario */
        .calendar {
            background: white;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 20px;
            overflow: hidden;
        }
        
        .calendar-header {
            background: #34495e;
            color: white;
            padding: 15px 20px;
            text-align: center;
            font-size: 18px;
            font-weight: bold;
        }
        
        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
        }
        
        .calendar-day-header {
            background: #ecf0f1;
            padding: 10px;
            text-align: center;
            font-weight: bold;
            font-size: 12px;
            color: #7f8c8d;
            border-bottom: 1px solid #bdc3c7;
        }
        
        .calendar-day {
            aspect-ratio: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            border: 1px solid #ecf0f1;
            background: white;
            transition: all 0.2s;
            cursor: pointer;
            text-decoration: none;
            color: #2c3e50;
        }
        
        .calendar-day:hover {
            background: #f8f9fa;
            transform: scale(1.05);
        }
        
        .calendar-day.empty {
            background: #f8f9fa;
            cursor: default;
        }
        
        .calendar-day.empty:hover {
            transform: none;
            background: #f8f9fa;
        }
        
        .calendar-day.today {
            background: #3498db;
            color: white;
            font-weight: bold;
        }
        
        .calendar-day.today:hover {
            background: #2980b9;
        }
        
        .calendar-day.has-review {
            background: #27ae60;
            color: white;
            font-weight: bold;
        }
        
        .calendar-day.has-review:hover {
            background: #229954;
        }
        
        .calendar-day.has-review.today {
            background: #e74c3c;
            color: white;
        }
        
        .calendar-day.has-review.today:hover {
            background: #c0392b;
        }
        
        .calendar-day.future {
            color: #bdc3c7;
            background: #f8f9fa;
        }
        
        .calendar-day.future:hover {
            background: #f8f9fa;
            transform: none;
            cursor: default;
        }
        
        .review-indicator {
            position: absolute;
            top: 3px;
            right: 3px;
            width: 8px;
            height: 8px;
            background: #e74c3c;
            border-radius: 50%;
            border: 1px solid white;
        }
        
        .calendar-legend {
            display: flex;
            justify-content: center;
            gap: 20px;
            padding: 15px;
            background: #f8f9fa;
            font-size: 12px;
        }
            /* Classe per nascondere il calendario */
            .hide {
                display: none !important;
            }
        
        .legend-item {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .legend-color {
            width: 15px;
            height: 15px;
            border-radius: 3px;
        }
        
        /* Stili Rating System */
        .rating-section {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin-top: 15px;
        }
        
        .rating-stars .star {
            font-size: 24px !important;
            cursor: pointer;
            color: #ddd;
            transition: color 0.2s !important;
            margin: 0 2px;
            transform: none !important;
        }
        
        .rating-stars .star:hover {
            color: #f39c12 !important;
            transform: none !important;
            font-size: 24px !important;
        }
        
        /* Regola pi√π specifica per forzare la dimensione */
        .rating-section .rating-stars .star,
        .rating-section .rating-stars .star:hover,
        .rating-section .rating-stars .star:active,
        .rating-section .rating-stars .star:focus {
            transform: none !important;
            scale: 1 !important;
            font-size: 24px !important;
        }
        
        .rating-stars .star.active {
            color: #f39c12;
        }
        
        .current-rating {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .current-rating .stars {
            margin-right: 10px;
        }
        
        .rating-display {
            text-align: left;
        }
    </style>
</head>
<body>
    <div class="header">
        <img src="/static/newsroom.png" alt="NewsRooom Logo" style="max-height: 150px; vertical-align: middle;">
        
    </div>
    
    <!-- Calendario -->
    <div class="calendar hide">
        <div class="calendar-header">
            üìÖ October 2025
        </div>
        <div class="calendar-grid">
            <!-- Intestazioni giorni -->
            <div class="calendar-day-header">LUN</div>
            <div class="calendar-day-header">MAR</div>
            <div class="calendar-day-header">MER</div>
            <div class="calendar-day-header">GIO</div>
            <div class="calendar-day-header">VEN</div>
            <div class="calendar-day-header">SAB</div>
            <div class="calendar-day-header">DOM</div>
            
            <!-- Giorni del mese -->
            
                
                    
                        <div class="calendar-day empty"></div>
                    
                
                    
                        <div class="calendar-day empty"></div>
                    
                
                    
                        
                            <div class="calendar-day " 
                                 title="Nessuna rassegna disponibile">
                                1
                            </div>
                        
                    
                
                    
                        
                            <div class="calendar-day " 
                                 title="Nessuna rassegna disponibile">
                                2
                            </div>
                        
                    
                
                    
                        
                            <div class="calendar-day " 
                                 title="Nessuna rassegna disponibile">
                                3
                            </div>
                        
                    
                
                    
                        
                            <div class="calendar-day " 
                                 title="Nessuna rassegna disponibile">
                                4
                            </div>
                        
                    
                
                    
                        
                            <div class="calendar-day " 
                                 title="Nessuna rassegna disponibile">
                                5
                            </div>
                        
                    
                
            
                
                    
                        
                            <div class="calendar-day " 
                                 title="Nessuna rassegna disponibile">
                                6
                            </div>
                        
                    
                
                    
                        
                            <div class="calendar-day " 
                                 title="Nessuna rassegna disponibile">
                                7
                            </div>
                        
                    
                
                    
                        
                            <div class="calendar-day " 
                                 title="Nessuna rassegna disponibile">
                                8
                            </div>
                        
                    
                
                    
                        
                            <div class="calendar-day " 
                                 title="Nessuna rassegna disponibile">
                                9
                            </div>
                        
                    
                
                    
                        
                            <div class="calendar-day " 
                                 title="Nessuna rassegna disponibile">
                                10
                            </div>
                        
                    
                
                    
                        
                            <a href="/tts/reader/43/" 
                               class="calendar-day has-review "
                               title="Rassegna disponibile per 11 Ottobre 2025">
                                11
                                <div class="review-indicator"></div>
                            </a>
                        
                    
                
                    
                        
                            <a href="/tts/reader/83/" 
                               class="calendar-day has-review "
                               title="Rassegna disponibile per 12 Ottobre 2025">
                                12
                                <div class="review-indicator"></div>
                            </a>
                        
                    
                
            
                
                    
                        
                            <a href="/tts/reader/84/" 
                               class="calendar-day has-review "
                               title="Rassegna disponibile per 13 Ottobre 2025">
                                13
                                <div class="review-indicator"></div>
                            </a>
                        
                    
                
                    
                        
                            <div class="calendar-day " 
                                 title="Nessuna rassegna disponibile">
                                14
                            </div>
                        
                    
                
                    
                        
                            <a href="/tts/reader/85/" 
                               class="calendar-day has-review "
                               title="Rassegna disponibile per 15 Ottobre 2025">
                                15
                                <div class="review-indicator"></div>
                            </a>
                        
                    
                
                    
                        
                            <a href="/tts/reader/86/" 
                               class="calendar-day has-review "
                               title="Rassegna disponibile per 16 Ottobre 2025">
                                16
                                <div class="review-indicator"></div>
                            </a>
                        
                    
                
                    
                        
                            <a href="/tts/reader/88/" 
                               class="calendar-day has-review "
                               title="Rassegna disponibile per 17 Ottobre 2025">
                                17
                                <div class="review-indicator"></div>
                            </a>
                        
                    
                
                    
                        
                            <a href="/tts/reader/89/" 
                               class="calendar-day has-review "
                               title="Rassegna disponibile per 18 Ottobre 2025">
                                18
                                <div class="review-indicator"></div>
                            </a>
                        
                    
                
                    
                        
                            <div class="calendar-day " 
                                 title="Nessuna rassegna disponibile">
                                19
                            </div>
                        
                    
                
            
                
                    
                        
                            <a href="/tts/reader/90/" 
                               class="calendar-day has-review "
                               title="Rassegna disponibile per 20 Ottobre 2025">
                                20
                                <div class="review-indicator"></div>
                            </a>
                        
                    
                
                    
                        
                            <a href="/tts/reader/92/" 
                               class="calendar-day has-review "
                               title="Rassegna disponibile per 21 Ottobre 2025">
                                21
                                <div class="review-indicator"></div>
                            </a>
                        
                    
                
                    
                        
                            <a href="/tts/reader/125/" 
                               class="calendar-day has-review "
                               title="Rassegna disponibile per 22 Ottobre 2025">
                                22
                                <div class="review-indicator"></div>
                            </a>
                        
                    
                
                    
                        
                            <div class="calendar-day " 
                                 title="Nessuna rassegna disponibile">
                                23
                            </div>
                        
                    
                
                    
                        
                            <a href="/tts/reader/127/" 
                               class="calendar-day has-review "
                               title="Rassegna disponibile per 24 Ottobre 2025">
                                24
                                <div class="review-indicator"></div>
                            </a>
                        
                    
                
                    
                        
                            <a href="/tts/reader/130/" 
                               class="calendar-day has-review "
                               title="Rassegna disponibile per 25 Ottobre 2025">
                                25
                                <div class="review-indicator"></div>
                            </a>
                        
                    
                
                    
                        
                            <a href="/tts/reader/132/" 
                               class="calendar-day has-review "
                               title="Rassegna disponibile per 26 Ottobre 2025">
                                26
                                <div class="review-indicator"></div>
                            </a>
                        
                    
                
            
                
                    
                        
                            <a href="/tts/reader/165/" 
                               class="calendar-day has-review today"
                               title="Rassegna disponibile per 27 Ottobre 2025">
                                27
                                <div class="review-indicator"></div>
                            </a>
                        
                    
                
                    
                        
                            <div class="calendar-day future" title="Data futura">
                                28
                            </div>
                        
                    
                
                    
                        
                            <div class="calendar-day future" title="Data futura">
                                29
                            </div>
                        
                    
                
                    
                        
                            <div class="calendar-day future" title="Data futura">
                                30
                            </div>
                        
                    
                
                    
                        
                            <div class="calendar-day future" title="Data futura">
                                31
                            </div>
                        
                    
                
                    
                        <div class="calendar-day empty"></div>
                    
                
                    
                        <div class="calendar-day empty"></div>
                    
                
            
        </div>
        <div class="calendar-legend">
            <div class="legend-item">
                <div class="legend-color" style="background: #27ae60;"></div>
                <span>Rassegna disponibile</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background: #3498db;"></div>
                <span>Oggi</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background: #e74c3c;"></div>
                <span>Rassegna di oggi</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background: #bdc3c7;"></div>
                <span>Data futura</span>
            </div>
        </div>
    </div>
    
    <div class="review-info">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
            <h2>üì∞ Rassegna del 27 Ottobre 2025</h2>
            <div>
                <a href="/admin/" class="btn  hide" style="text-decoration: none;">‚öôÔ∏è Admin</a>
                
            </div>
        </div>
        
        <!-- Statistiche principali -->
        <div class="control-group" style="flex-wrap: wrap; margin-bottom: 10px;">
            <span>üìä <strong>12</strong> articoli</span>
            <span>üì° <strong>3</strong> fonti</span>
            <span>üìù <strong>917</strong> parole</span>
            <span>üéß <strong>0</strong> riproduzioni</span>
        </div>
        
        <!-- Statistiche dettagliate -->
        <div class="control-group" style="flex-wrap: wrap; margin-bottom: 10px;">
            <span>üìÇ <strong>7</strong> categorie</span>
            <span>üè∑Ô∏è <strong>41</strong> tag</span>
            <span>üîó <strong>6</strong> temi unificati</span>
            
            <span>ü§ñ <strong>Ollama (jobautomation/OpenEuroLLM-Italian:latest)</strong></span>
            
        </div>
        
        <!-- Dettagli aggiuntivi -->
        
        <div class="control-group">
            <span>‚è±Ô∏è Generazione: <strong>2731083ms</strong></span>
            <span>üìÖ Creata: <strong>27/10/2025 11:25</strong></span>
        </div>
        
        
        <!-- Sistema di Rating -->
        <div class="rating-section  hide" style="margin-top: 15px; padding-top: 15px; border-top: 1px solid #ecf0f1;">
            <h4 style="margin-bottom: 10px;">‚≠ê Valuta questa rassegna</h4>
            <div class="rating-display">
                
                
                <div class="rating-stars" style="margin-bottom: 10px;">
                    <span style="margin-right: 10px;">Il tuo voto:</span>
                    
                        <span class="star" data-rating="1" 
                              style="font-size: 24px; cursor: pointer; color: #ddd; transition: color 0.2s;">‚òÖ</span>
                    
                        <span class="star" data-rating="2" 
                              style="font-size: 24px; cursor: pointer; color: #ddd; transition: color 0.2s;">‚òÖ</span>
                    
                        <span class="star" data-rating="3" 
                              style="font-size: 24px; cursor: pointer; color: #ddd; transition: color 0.2s;">‚òÖ</span>
                    
                        <span class="star" data-rating="4" 
                              style="font-size: 24px; cursor: pointer; color: #ddd; transition: color 0.2s;">‚òÖ</span>
                    
                        <span class="star" data-rating="5" 
                              style="font-size: 24px; cursor: pointer; color: #ddd; transition: color 0.2s;">‚òÖ</span>
                    
                </div>
                
                <div id="rating-message" class="status" style="display: none; margin-top: 10px;"></div>
            </div>
        </div>
    </div>
    
    <div class="controls">
        <h3>üéõÔ∏è Controlli Audio</h3>
        
        <div class="control-group">
            <label>Voce:</label>
            <select id="voiceSelect" class="voice-selector">
                <option value="">Caricamento voci...</option>
            </select>
        </div>
        
        <div class="control-group">
            <label>Velocit√†:</label>
            <input type="range" id="rateSlider" min="0.5" max="2" step="0.1" value="1">
            <span id="rateValue">1.0x</span>
        </div>
        
        <div class="control-group">
            <label>Pitch:</label>
            <input type="range" id="pitchSlider" min="0.5" max="2" step="0.1" value="1">
            <span id="pitchValue">1.0</span>
        </div>
        
        <div class="control-group">
            <label>Volume:</label>
            <input type="range" id="volumeSlider" min="0" max="1" step="0.1" value="0.8">
            <span id="volumeValue">0.8</span>
        </div>
        
        <div class="control-group">
            <button id="playPauseBtn" class="btn success" style="width: 100%; font-size: 18px; padding: 15px;">‚ñ∂Ô∏è Inizia Lettura</button>
        </div>
        
        <div class="progress-bar">
            <div id="progressFill" class="progress-fill"></div>
        </div>
        
        <div id="status" class="status info" style="display: none;"></div>
    </div>
    
    <div class="content">
        <h3>üìñ Contenuto</h3>
        <div id="reviewContent" lang="it"><p>RASSEGNA STAMPA 27/10/2025</p>

<p>POLITICA.</p>

<p>Il dibattito politico attuale √® animato da due questioni principali, entrambe destinate a suscitare reazioni contrastanti nell&#x27;opinione pubblica. In primo luogo, la manovra finanziaria in esame introduce una lieve revisione dei requisiti per l&#x27;accesso alla pensione, con un adeguamento previsto per il 2027 e il 2028. Tale decisione, giustificata dalla necessit√† di assicurare la tenuta del sistema previdenziale in relazione all&#x27;innalzamento dell&#x27;et√† media, non mancher√† di sollevare interrogativi sulla sua equit√† e sui possibili impatti sulle fasce pi√π vulnerabili della popolazione.</p>

<p>Parallelamente, una proposta legislativa congiunta mira a fornire un sostegno agli operatori economici attraverso meccanismi di adeguamento automatico di tariffe e servizi di telemarketing. Questa iniziativa, tuttavia, desta apprensione tra le associazioni di tutela dei consumatori, le quali temono un aumento indiscriminato dei costi e una potenziale penalizzazione per i cittadini. Si auspica, pertanto, una valutazione attenta e ponderata di tale proposta, al fine di evitare conseguenze indesiderate e tutelare al meglio gli interessi di tutti.</p>

<p>ECONOMIA.</p>

<p>Le recenti manovre fiscali, pensate per alleggerire il carico tributario sui redditi da lavoro dipendente, non hanno prodotto gli effetti sperati sul potere d&#x27;acquisto dei lavoratori. L&#x27;applicazione ritardata dei rinnovi contrattuali e l&#x27;erogazione di indennit√† hanno in parte vanificato i benefici previsti. Si segnala, pertanto, una persistente sensazione di impoverimento, nonostante gli interventi governativi. L&#x27;analisi dei dati conferma una situazione complessa, che richiede ulteriori approfondimenti.</p>

<p>CRONACA.</p>

<p>Un grave incidente stradale ha coinvolto due autovetture nei pressi di Vetralla, sulla Cassia. Tre giovani sono rimasti feriti a seguito dello scontro, e sono stati soccorsi in ospedale. Le condizioni meteorologiche avverse potrebbero aver contribuito all&#x27;accaduto, ma gli inquirenti non escludono una possibile gara automobilistica non autorizzata. Le indagini dei carabinieri sono in corso per chiarire l&#x27;esatta dinamica dell&#x27;incidente e accertare le responsabilit√†.</p>

<p>ESTERI.</p>

<p>La situazione in Ucraina continua a essere drammatica, con un recente attacco con droni nella regione di Sumy che ha provocato vittime e feriti, tra cui minori, e danni significativi alle infrastrutture energetiche, causando interruzioni di corrente a Kiev e dintorni. Parallelamente, il Ministero della Difesa russo ha riferito di aver neutralizzato diversi droni diretti verso Mosca e altre aree, con conseguenti incendi, come quello verificatosi in un deposito di carburante.</p>

<p>In Argentina, il panorama politico ha subito una svolta significativa con la vittoria del partito &quot;La Libert√† Avanza&quot; nelle elezioni di met√† mandato. Il risultato, che ha visto un forte consenso soprattutto nella provincia di Buenos Aires, apre la strada a una profonda revisione delle politiche economiche del paese. L&#x27;esito elettorale, pur segnato da una bassa affluenza e da un calo di consensi rispetto alle elezioni presidenziali, √® stato sostenuto da un sostegno finanziario proveniente dagli Stati Uniti, ma √® stato preceduto da polemiche e accuse che hanno coinvolto esponenti di spicco del partito, complicando ulteriormente il contesto politico argentino.</p>

<p>CULTURA.</p>

<p>Il panorama culturale italiano si arricchisce di nuove iniziative, capaci di celebrare sia la tradizione che l&#x27;incontro tra culture diverse. A Perugia, apre le sue porte la &quot;Citt√† del Cioccolato&quot;, un ambizioso progetto museale che promette un&#x27;esperienza immersiva nel mondo del cacao e del cioccolato, con un occhio di riguardo alla storia locale e all&#x27;innovazione creativa. L&#x27;investimento di sei milioni di euro testimonia l&#x27;importanza attribuita a questo settore, che si presenta come un motore di attrazione turistica e di valorizzazione del territorio.</p>

<p>Parallelamente, Roma ospita una mostra fotografica di notevole interesse storico e umano. Le immagini inedite di Cecilia Fajardo ci trasportano indietro nel tempo, offrendo uno sguardo privilegiato sulla comunit√† latinoamericana che ha trovato rifugio e ispirazione in Italia tra gli anni Settanta e Novanta. Un periodo segnato da eventi politici complessi, che ha visto intellettuali e artisti iberoamericani cercare asilo e libert√† di espressione nel nostro Paese. Le fotografie di Fajardo immortalano un&#x27;epoca di scambio culturale intenso e di ricerca di identit√†, offrendo un documento prezioso per comprendere un capitolo significativo della storia recente.</p>

<p>SPETTACOLO.</p>

<p>L&#x27;attenzione del pubblico argentino √® stata recentemente catturata da eventi politici e sportivi di rilievo. A Buenos Aires, una folla numerosa si √® radunata per seguire lo scrutinio delle elezioni di midterm, a testimonianza di un vivo interesse per il futuro politico del paese. La partecipazione popolare ha sottolineato l&#x27;importanza di queste elezioni, che hanno visto il presidente ottenere un risultato positivo.</p>

<p>Parallelamente, un acceso confronto televisivo ha infiammato il dibattito calcistico. Due figure di spicco, un ex capitano e un noto commentatore, hanno espresso opinioni divergenti sulla forza dell&#x27;Inter. Uno dei due ha riconosciuto la superiorit√† della squadra nerazzurra negli ultimi anni, evidenziandone i successi europei. L&#x27;altro, pur riconoscendone le qualit√†, ha espresso riserve sulla sua reale capacit√† di dominare il panorama calcistico. La discussione, vivace, ha offerto spunti interessanti per gli appassionati di sport, concludendosi con un momento di leggerezza.</p>

<p>SCIENZA.</p>

<p>Il progresso tecnologico nel settore spaziale continua a segnare nuove tappe, con SpaceX che consolida la sua leadership mondiale. L&#x27;azienda, guidata da Elon Musk, ha superato ogni aspettativa, stabilendo un nuovo primato di lanci annuali grazie alla versatilit√† dei suoi razzi Falcon. Questo dominio sottolinea l&#x27;importanza cruciale dell&#x27;innovazione privata nell&#x27;esplorazione e nell&#x27;utilizzo dello spazio.</p>

<p>Parallelamente, la ricerca scientifica offre spunti sorprendenti nel campo della biologia rigenerativa. Uno studio recente ha rivelato un legame inatteso tra la risposta fisiologica allo stress e la capacit√† di rigenerazione degli arti, osservata in modo eccezionale nella salamandra axolotl. L&#x27;attivazione del sistema nervoso simpatico, e in particolare l&#x27;azione dell&#x27;adrenalina, sembra innescare un processo di rigenerazione a livello cellulare, aprendo prospettive affascinanti per la medicina del futuro e la possibilit√† di stimolare la riparazione dei tessuti anche nell&#x27;uomo.</p></div>
    </div>

    <script>
        class PressReviewReader {
            constructor() {
                this.synth = window.speechSynthesis;
                this.utterance = null;
                this.voices = [];
                this.isReading = false;
                this.hasPlayedOnce = false;
                this.isPaused = false;
                this.currentPosition = 0;
                this.content = `RASSEGNA STAMPA 27/10/2025\u000A\u000APOLITICA.\u000A\u000AIl dibattito politico attuale √® animato da due questioni principali, entrambe destinate a suscitare reazioni contrastanti nell\u0027opinione pubblica. In primo luogo, la manovra finanziaria in esame introduce una lieve revisione dei requisiti per l\u0027accesso alla pensione, con un adeguamento previsto per il 2027 e il 2028. Tale decisione, giustificata dalla necessit√† di assicurare la tenuta del sistema previdenziale in relazione all\u0027innalzamento dell\u0027et√† media, non mancher√† di sollevare interrogativi sulla sua equit√† e sui possibili impatti sulle fasce pi√π vulnerabili della popolazione.\u000A\u000AParallelamente, una proposta legislativa congiunta mira a fornire un sostegno agli operatori economici attraverso meccanismi di adeguamento automatico di tariffe e servizi di telemarketing. Questa iniziativa, tuttavia, desta apprensione tra le associazioni di tutela dei consumatori, le quali temono un aumento indiscriminato dei costi e una potenziale penalizzazione per i cittadini. Si auspica, pertanto, una valutazione attenta e ponderata di tale proposta, al fine di evitare conseguenze indesiderate e tutelare al meglio gli interessi di tutti.\u000A\u000AECONOMIA.\u000A\u000ALe recenti manovre fiscali, pensate per alleggerire il carico tributario sui redditi da lavoro dipendente, non hanno prodotto gli effetti sperati sul potere d\u0027acquisto dei lavoratori. L\u0027applicazione ritardata dei rinnovi contrattuali e l\u0027erogazione di indennit√† hanno in parte vanificato i benefici previsti. Si segnala, pertanto, una persistente sensazione di impoverimento, nonostante gli interventi governativi. L\u0027analisi dei dati conferma una situazione complessa, che richiede ulteriori approfondimenti.\u000A\u000ACRONACA.\u000A\u000AUn grave incidente stradale ha coinvolto due autovetture nei pressi di Vetralla, sulla Cassia. Tre giovani sono rimasti feriti a seguito dello scontro, e sono stati soccorsi in ospedale. Le condizioni meteorologiche avverse potrebbero aver contribuito all\u0027accaduto, ma gli inquirenti non escludono una possibile gara automobilistica non autorizzata. Le indagini dei carabinieri sono in corso per chiarire l\u0027esatta dinamica dell\u0027incidente e accertare le responsabilit√†.\u000A\u000AESTERI.\u000A\u000ALa situazione in Ucraina continua a essere drammatica, con un recente attacco con droni nella regione di Sumy che ha provocato vittime e feriti, tra cui minori, e danni significativi alle infrastrutture energetiche, causando interruzioni di corrente a Kiev e dintorni. Parallelamente, il Ministero della Difesa russo ha riferito di aver neutralizzato diversi droni diretti verso Mosca e altre aree, con conseguenti incendi, come quello verificatosi in un deposito di carburante.\u000A\u000AIn Argentina, il panorama politico ha subito una svolta significativa con la vittoria del partito \u0022La Libert√† Avanza\u0022 nelle elezioni di met√† mandato. Il risultato, che ha visto un forte consenso soprattutto nella provincia di Buenos Aires, apre la strada a una profonda revisione delle politiche economiche del paese. L\u0027esito elettorale, pur segnato da una bassa affluenza e da un calo di consensi rispetto alle elezioni presidenziali, √® stato sostenuto da un sostegno finanziario proveniente dagli Stati Uniti, ma √® stato preceduto da polemiche e accuse che hanno coinvolto esponenti di spicco del partito, complicando ulteriormente il contesto politico argentino.\u000A\u000ACULTURA.\u000A\u000AIl panorama culturale italiano si arricchisce di nuove iniziative, capaci di celebrare sia la tradizione che l\u0027incontro tra culture diverse. A Perugia, apre le sue porte la \u0022Citt√† del Cioccolato\u0022, un ambizioso progetto museale che promette un\u0027esperienza immersiva nel mondo del cacao e del cioccolato, con un occhio di riguardo alla storia locale e all\u0027innovazione creativa. L\u0027investimento di sei milioni di euro testimonia l\u0027importanza attribuita a questo settore, che si presenta come un motore di attrazione turistica e di valorizzazione del territorio.\u000A\u000AParallelamente, Roma ospita una mostra fotografica di notevole interesse storico e umano. Le immagini inedite di Cecilia Fajardo ci trasportano indietro nel tempo, offrendo uno sguardo privilegiato sulla comunit√† latinoamericana che ha trovato rifugio e ispirazione in Italia tra gli anni Settanta e Novanta. Un periodo segnato da eventi politici complessi, che ha visto intellettuali e artisti iberoamericani cercare asilo e libert√† di espressione nel nostro Paese. Le fotografie di Fajardo immortalano un\u0027epoca di scambio culturale intenso e di ricerca di identit√†, offrendo un documento prezioso per comprendere un capitolo significativo della storia recente.\u000A\u000ASPETTACOLO.\u000A\u000AL\u0027attenzione del pubblico argentino √® stata recentemente catturata da eventi politici e sportivi di rilievo. A Buenos Aires, una folla numerosa si √® radunata per seguire lo scrutinio delle elezioni di midterm, a testimonianza di un vivo interesse per il futuro politico del paese. La partecipazione popolare ha sottolineato l\u0027importanza di queste elezioni, che hanno visto il presidente ottenere un risultato positivo.\u000A\u000AParallelamente, un acceso confronto televisivo ha infiammato il dibattito calcistico. Due figure di spicco, un ex capitano e un noto commentatore, hanno espresso opinioni divergenti sulla forza dell\u0027Inter. Uno dei due ha riconosciuto la superiorit√† della squadra nerazzurra negli ultimi anni, evidenziandone i successi europei. L\u0027altro, pur riconoscendone le qualit√†, ha espresso riserve sulla sua reale capacit√† di dominare il panorama calcistico. La discussione, vivace, ha offerto spunti interessanti per gli appassionati di sport, concludendosi con un momento di leggerezza.\u000A\u000ASCIENZA.\u000A\u000AIl progresso tecnologico nel settore spaziale continua a segnare nuove tappe, con SpaceX che consolida la sua leadership mondiale. L\u0027azienda, guidata da Elon Musk, ha superato ogni aspettativa, stabilendo un nuovo primato di lanci annuali grazie alla versatilit√† dei suoi razzi Falcon. Questo dominio sottolinea l\u0027importanza cruciale dell\u0027innovazione privata nell\u0027esplorazione e nell\u0027utilizzo dello spazio.\u000A\u000AParallelamente, la ricerca scientifica offre spunti sorprendenti nel campo della biologia rigenerativa. Uno studio recente ha rivelato un legame inatteso tra la risposta fisiologica allo stress e la capacit√† di rigenerazione degli arti, osservata in modo eccezionale nella salamandra axolotl. L\u0027attivazione del sistema nervoso simpatico, e in particolare l\u0027azione dell\u0027adrenalina, sembra innescare un processo di rigenerazione a livello cellulare, aprendo prospettive affascinanti per la medicina del futuro e la possibilit√† di stimolare la riparazione dei tessuti anche nell\u0027uomo.`;
                
                // Sistema di chunking per testi lunghi
                this.chunks = this.createChunks(this.content);
                this.currentChunkIndex = 0;
                this.totalChunks = this.chunks.length;
                
                this.initializeElements();
                this.loadVoices();
                this.setupEventListeners();
                
                console.log(`üìö Testo diviso in ${this.totalChunks} chunk(s)`);
            }
            
            initializeElements() {
                this.voiceSelect = document.getElementById('voiceSelect');
                this.rateSlider = document.getElementById('rateSlider');
                this.pitchSlider = document.getElementById('pitchSlider');
                this.volumeSlider = document.getElementById('volumeSlider');
                this.rateValue = document.getElementById('rateValue');
                this.pitchValue = document.getElementById('pitchValue');
                this.volumeValue = document.getElementById('volumeValue');
                this.playPauseBtn = document.getElementById('playPauseBtn');
                this.status = document.getElementById('status');
                this.progressFill = document.getElementById('progressFill');
                this.contentDiv = document.getElementById('reviewContent');
            }
            
            createChunks(text) {
                // Rimuovi spazi extra e normalizza il testo
                text = text.trim().replace(/\s+/g, ' ');
                
                // Prima divisione per paragrafi (linee vuote o doppie newline)
                let paragraphs = text.split(/\n\s*\n/).filter(p => p.trim().length > 0);
                
                const chunks = [];
                const maxChunkLength = 500; // Limite di caratteri per chunk (sicuro per TTS)
                
                paragraphs.forEach(paragraph => {
                    paragraph = paragraph.trim();
                    
                    if (paragraph.length <= maxChunkLength) {
                        // Il paragrafo √® gi√† abbastanza piccolo
                        chunks.push(paragraph);
                    } else {
                        // Dividi il paragrafo in frasi
                        const sentences = paragraph.split(/([.!?]+\s+)/).filter(s => s.trim().length > 0);
                        let currentChunk = '';
                        
                        for (let i = 0; i < sentences.length; i += 2) {
                            const sentence = sentences[i] + (sentences[i + 1] || '');
                            
                            if ((currentChunk + sentence).length <= maxChunkLength) {
                                currentChunk += sentence;
                            } else {
                                if (currentChunk.trim()) {
                                    chunks.push(currentChunk.trim());
                                }
                                currentChunk = sentence;
                            }
                        }
                        
                        if (currentChunk.trim()) {
                            chunks.push(currentChunk.trim());
                        }
                    }
                });
                
                // Log per debug
                chunks.forEach((chunk, index) => {
                    console.log(`üìÑ Chunk ${index + 1}: ${chunk.length} caratteri - "${chunk.substring(0, 50)}..."`);
                });
                
                return chunks.filter(chunk => chunk.trim().length > 0);
            }
            
            loadVoices() {
                this.voices = this.synth.getVoices();
                
                if (this.voices.length == 0) {
                    // Riprova dopo un po' se le voci non sono ancora caricate
                    setTimeout(() => this.loadVoices(), 100);
                    return;
                }
                
                this.populateVoiceSelect();
            }
            
            populateVoiceSelect() {
                this.voiceSelect.innerHTML = '';
                
                // Filtra voci italiane con priorit√†
                const italianVoices = this.voices.filter(voice => 
                    voice.lang == 'it-IT' || 
                    voice.lang == 'it' ||
                    voice.lang.startsWith('it-') ||
                    voice.name.toLowerCase().includes('italian') ||
                    voice.name.toLowerCase().includes('italiano')
                );
                
                // Ordina le voci italiane per preferenza
                italianVoices.sort((a, b) => {
                    // Priorit√† per voci specificamente italiane
                    if (a.lang == 'it-IT' && b.lang !== 'it-IT') return -1;
                    if (b.lang == 'it-IT' && a.lang !== 'it-IT') return 1;
                    if (a.lang == 'it' && b.lang !== 'it') return -1;
                    if (b.lang == 'it' && a.lang !== 'it') return 1;
                    return a.name.localeCompare(b.name);
                });
                
                const otherVoices = this.voices.filter(voice => 
                    !italianVoices.includes(voice)
                );
                
                // Aggiungi voci italiane prima
                if (italianVoices.length > 0) {
                    const italianGroup = document.createElement('optgroup');
                    italianGroup.label = `üáÆüáπ Voci Italiane (${italianVoices.length})`;
                    
                    italianVoices.forEach((voice, index) => {
                        const option = document.createElement('option');
                        option.value = this.voices.indexOf(voice);
                        option.textContent = `${voice.name} (${voice.lang})`;
                        if (voice.default) option.textContent += ' [Default]';
                        if (voice.localService == false) option.textContent += ' [Cloud]';
                        italianGroup.appendChild(option);
                    });
                    
                    this.voiceSelect.appendChild(italianGroup);
                    this.voiceSelect.value = this.voices.indexOf(italianVoices[0]); // Prima voce italiana
                }
                
                // Aggiungi altre voci
                if (otherVoices.length > 0) {
                    const otherGroup = document.createElement('optgroup');
                    otherGroup.label = `üåç Altre Voci (${otherVoices.length})`;
                    
                    otherVoices.forEach((voice) => {
                        const option = document.createElement('option');
                        option.value = this.voices.indexOf(voice);
                        option.textContent = `${voice.name} (${voice.lang})`;
                        otherGroup.appendChild(option);
                    });
                    
                    this.voiceSelect.appendChild(otherGroup);
                }
                
                // Messaggio di stato pi√π dettagliato
                if (italianVoices.length > 0) {
                    this.showStatus(`‚úÖ Trovate ${italianVoices.length} voci italiane. Lingua impostata su italiano.`, 'info');
                } else {
                    this.showStatus('‚ö†Ô∏è Nessuna voce italiana trovata. Controlla le impostazioni lingua del sistema.', 'warning');
                }
            }
            
            setupEventListeners() {
                // Slider eventi
                this.rateSlider.addEventListener('input', (e) => {
                    this.rateValue.textContent = parseFloat(e.target.value).toFixed(1) + 'x';
                });
                
                this.pitchSlider.addEventListener('input', (e) => {
                    this.pitchValue.textContent = parseFloat(e.target.value).toFixed(1);
                });
                
                this.volumeSlider.addEventListener('input', (e) => {
                    this.volumeValue.textContent = parseFloat(e.target.value).toFixed(1);
                });
                
                // Pulsanti
                this.playPauseBtn.addEventListener('click', () => this.togglePlayPause());
                
                // Caricamento voci quando disponibili
                if (speechSynthesis.onvoiceschanged !== undefined) {
                    speechSynthesis.onvoiceschanged = () => this.loadVoices();
                }
            }
            
            createUtterance(text) {
                const utterance = new SpeechSynthesisUtterance(text);
                
                utterance.lang = 'it-IT';
                
                if (this.voices.length > 0 && this.voiceSelect.value !== '') {
                    utterance.voice = this.voices[parseInt(this.voiceSelect.value)];
                }
                
                utterance.rate = parseFloat(this.rateSlider.value);
                utterance.pitch = parseFloat(this.pitchSlider.value);
                utterance.volume = parseFloat(this.volumeSlider.value);
                
                return utterance;
            }
            
            togglePlayPause() {
                if (this.isReading) {
                    // Se sta leggendo, metti in pausa o riprendi
                    if (this.synth.speaking && !this.isPaused) {
                        this.synth.pause();
                        this.isPaused = true;
                        this.playPauseBtn.innerHTML = '‚ñ∂Ô∏è Riprendi Lettura';
                        this.showStatus('‚è∏Ô∏è Lettura in pausa', 'warning');
                    } else if (this.isPaused) {
                        this.synth.resume();
                        this.isPaused = false;
                        this.playPauseBtn.innerHTML = '‚è∏Ô∏è Pausa Lettura';
                        this.showStatus('‚ñ∂Ô∏è Lettura ripresa', 'info');
                    }
                } else {
                    // Inizia la lettura dal chunk corrente
                    this.startReading();
                }
            }
            
            startReading() {
                // Stop any previous reading
                this.synth.cancel();
                
                // Verifica che ci siano chunk da leggere
                if (this.currentChunkIndex >= this.totalChunks) {
                    this.showStatus('‚úÖ Lettura completata', 'info');
                    return;
                }
                
                // Incrementa il contatore solo alla prima riproduzione
                if (!this.hasPlayedOnce) {
                    this.incrementPlayCount();
                    this.hasPlayedOnce = true;
                }
                
                this.isReading = true;
                this.isPaused = false;
                this.playPauseBtn.innerHTML = '‚è∏Ô∏è Pausa Lettura';
                
                this.playCurrentChunk();
            }
            
            playCurrentChunk() {
                if (this.currentChunkIndex >= this.totalChunks) {
                    // Tutti i chunk sono stati letti
                    this.isReading = false;
                    this.isPaused = false;
                    this.playPauseBtn.innerHTML = '‚ñ∂Ô∏è Inizia Lettura';
                    this.progressFill.style.width = '100%';
                    this.showStatus('‚úÖ Lettura completata', 'info');
                    this.currentChunkIndex = 0; // Reset per una nuova lettura
                    return;
                }
                
                const currentText = this.chunks[this.currentChunkIndex];
                const utterance = this.createUtterance(currentText);
                
                this.showStatus(`üé§ Lettura chunk ${this.currentChunkIndex + 1}/${this.totalChunks}...`, 'info');
                
                utterance.onend = () => {
                    if (!this.isPaused && this.isReading) {
                        this.currentChunkIndex++;
                        this.updateGlobalProgress();
                        
                        // Breve pausa tra i chunk per evitare problemi
                        setTimeout(() => {
                            if (this.isReading && !this.isPaused) {
                                this.playCurrentChunk();
                            }
                        }, 100);
                    }
                };
                
                utterance.onerror = (event) => {
                    this.isReading = false;
                    this.isPaused = false;
                    this.playPauseBtn.innerHTML = '‚ñ∂Ô∏è Inizia Lettura';
                    this.showStatus('‚ùå Errore: ' + event.error, 'error');
                };
                
                utterance.onboundary = (event) => {
                    // Progresso all'interno del chunk corrente
                    const chunkProgress = (event.charIndex / currentText.length);
                    const totalProgress = ((this.currentChunkIndex + chunkProgress) / this.totalChunks) * 100;
                    this.progressFill.style.width = totalProgress + '%';
                };
                
                this.utterance = utterance;
                this.synth.speak(utterance);
            }
            
            updateGlobalProgress() {
                const progress = (this.currentChunkIndex / this.totalChunks) * 100;
                this.progressFill.style.width = progress + '%';
            }
            
            incrementPlayCount() {
                const reviewId = 165;
                
                fetch(`/tts/api/reviews/${reviewId}/play/`, {
                    method: 'POST',
                    headers: {
                        'X-CSRFToken': this.getCSRFToken(),
                        'Content-Type': 'application/json',
                    }
                })
                .then(response => response.json())
                .then(data => {
                    if (data.success) {
                        // Aggiorna il contatore nell'interfaccia
                        const playCountElement = document.querySelector('.control-group span:nth-child(4)');
                        if (playCountElement) {
                            playCountElement.innerHTML = `üéß <strong>${data.play_count}</strong> riproduzioni`;
                        }
                    }
                })
                .catch(error => {
                    console.log('Errore incremento play count:', error);
                });
            }
            
            getCSRFToken() {
                // 1. Prova il meta tag (pi√π affidabile per ngrok)
                const metaToken = document.querySelector('meta[name="csrf-token"]');
                if (metaToken) {
                    const token = metaToken.getAttribute('content');
                    if (token) {
                        return token;
                    }
                }
                
                // 2. Prova il token dal DOM input
                const csrfInput = document.querySelector('[name=csrfmiddlewaretoken]');
                if (csrfInput) {
                    return csrfInput.value;
                }
                
                // 3. Fallback ai cookie
                const cookies = document.cookie.split(';');
                for (let cookie of cookies) {
                    const [name, value] = cookie.trim().split('=');
                    if (name === 'csrftoken') {
                        return decodeURIComponent(value);
                    }
                }
                
                // Debug per ngrok
                console.log('CSRF Debug - Meta token:', metaToken ? metaToken.getAttribute('content') : 'NONE');
                console.log('CSRF Debug - Cookies disponibili:', document.cookie);
                console.log('CSRF Debug - Dominio corrente:', window.location.hostname);
                console.log('CSRF Debug - Input CSRF:', csrfInput ? csrfInput.value : 'NONE');
                
                return '';
            }
            
            showStatus(message, type = 'info') {
                this.status.textContent = message;
                this.status.className = `status ${type}`;
                this.status.style.display = 'block';
                
                // Nascondi dopo 5 secondi se √® un messaggio di successo
                if (type == 'info') {
                    setTimeout(() => {
                        this.status.style.display = 'none';
                    }, 5000);
                }
            }
        }
        
        // Sistema di Rating
        class RatingSystem {
            constructor() {
                this.reviewId = 165;
                this.stars = document.querySelectorAll('.rating-stars .star');
                this.messageDiv = document.getElementById('rating-message');
                this.currentRating = 0;
                this.hasVoted = false;
                
                this.setupEventListeners();
                this.checkExistingVote();
            }
            
            setupEventListeners() {
                this.stars.forEach((star, index) => {
                    star.addEventListener('mouseover', () => this.highlightStars(index + 1));
                    star.addEventListener('mouseout', () => this.resetHighlight());
                    star.addEventListener('click', () => this.submitRating(index + 1));
                });
            }
            
            highlightStars(rating) {
                if (this.hasVoted) return;
                
                this.stars.forEach((star, index) => {
                    star.textContent = '‚òÖ';  // Usa sempre lo stesso simbolo
                    if (index < rating) {
                        star.style.color = '#f39c12';
                    } else {
                        star.style.color = '#ddd';
                    }
                });
            }
            
            resetHighlight() {
                if (this.hasVoted) return;
                
                this.stars.forEach((star, index) => {
                    star.textContent = '‚òÖ';  // Usa sempre lo stesso simbolo
                    if (index < this.currentRating) {
                        star.style.color = '#f39c12';
                    } else {
                        star.style.color = '#ddd';
                    }
                });
            }
            
            submitRating(rating) {
                if (this.hasVoted) {
                    this.showMessage('Hai gi√† votato questa rassegna!', 'warning');
                    return;
                }
                
                this.showMessage('Invio voto...', 'info');
                
                fetch(`/tts/api/reviews/${this.reviewId}/rate/`, {
                    method: 'POST',
                    headers: {
                        'X-CSRFToken': this.getCSRFToken(),
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ rating: rating })
                })
                .then(response => response.json())
                .then(data => {
                    if (data.success) {
                        this.hasVoted = true;
                        this.currentRating = rating;
                        this.updateDisplay(rating);
                        this.showMessage(`Grazie! Hai votato ${rating} stelle`, 'info');
                        
                        // Salva nel localStorage per evitare voti multipli
                        const votedKey = `voted_review_${this.reviewId}`;
                        localStorage.setItem(votedKey, rating.toString());
                        
                        // Aggiorna la media se fornita
                        if (data.average_rating !== undefined) {
                            this.updateAverageDisplay(data.average_rating, data.total_votes);
                        }
                    } else {
                        this.showMessage(data.message || 'Errore durante il voto', 'error');
                    }
                })
                .catch(error => {
                    console.error('Errore rating:', error);
                    this.showMessage('Errore di connessione', 'error');
                });
            }
            
            updateDisplay(rating) {
                this.stars.forEach((star, index) => {
                    star.textContent = '‚òÖ';  // Usa sempre lo stesso simbolo
                    if (index < rating) {
                        star.style.color = '#f39c12';
                    } else {
                        star.style.color = '#ddd';
                    }
                    star.style.cursor = 'default';
                });
            }
            
            updateAverageDisplay(average, totalVotes) {
                const currentRatingDiv = document.querySelector('.current-rating');
                if (currentRatingDiv) {
                    // Aggiorna la media esistente
                    const starsSpan = currentRatingDiv.querySelector('span:first-child');
                    const textSpan = currentRatingDiv.querySelector('span:last-child');
                    
                    let starsHtml = '';
                    for (let i = 1; i <= 5; i++) {
                        const color = i <= Math.round(average) ? '#f39c12' : '#ddd';
                        starsHtml += `<span style="color: ${color};">‚òÖ</span>`;
                    }
                    
                    starsSpan.innerHTML = starsHtml;
                    textSpan.textContent = `${average}/5 (${totalVotes} vot${totalVotes === 1 ? 'o' : 'i'})`;
                } else {
                    // Crea la sezione media se non esiste
                    const ratingDisplay = document.querySelector('.rating-display');
                    const newRatingDiv = document.createElement('div');
                    newRatingDiv.className = 'current-rating';
                    newRatingDiv.style.marginBottom = '10px';
                    
                    let starsHtml = '';
                    for (let i = 1; i <= 5; i++) {
                        const color = i <= Math.round(average) ? '#f39c12' : '#ddd';
                        starsHtml += `<span style="color: ${color};">‚òÖ</span>`;
                    }
                    
                    newRatingDiv.innerHTML = `
                        <span style="font-size: 18px;">${starsHtml}</span>
                        <span style="margin-left: 10px; font-weight: bold;">${average}/5 (${totalVotes} vot${totalVotes === 1 ? 'o' : 'i'})</span>
                    `;
                    
                    ratingDisplay.insertBefore(newRatingDiv, ratingDisplay.firstChild);
                }
            }
            
            checkExistingVote() {
                // Controlla se l'utente ha gi√† votato (tramite cookie o localStorage)
                const votedKey = `voted_review_${this.reviewId}`;
                const existingVote = localStorage.getItem(votedKey);
                
                if (existingVote) {
                    this.hasVoted = true;
                    this.currentRating = parseInt(existingVote);
                    this.updateDisplay(this.currentRating);
                    this.showMessage('Hai gi√† votato questa rassegna', 'info');
                }
            }
            
            getCSRFToken() {
                // 1. Prova il meta tag (pi√π affidabile per ngrok)
                const metaToken = document.querySelector('meta[name="csrf-token"]');
                if (metaToken) {
                    const token = metaToken.getAttribute('content');
                    if (token) {
                        return token;
                    }
                }
                
                // 2. Prova il token dal DOM input
                const csrfInput = document.querySelector('[name=csrfmiddlewaretoken]');
                if (csrfInput) {
                    return csrfInput.value;
                }
                
                // 3. Fallback ai cookie
                const cookies = document.cookie.split(';');
                for (let cookie of cookies) {
                    const [name, value] = cookie.trim().split('=');
                    if (name === 'csrftoken') {
                        return decodeURIComponent(value);
                    }
                }
                
                // Debug per ngrok
                console.log('CSRF Debug - Meta token:', metaToken ? metaToken.getAttribute('content') : 'NONE');
                console.log('CSRF Debug - Cookies disponibili:', document.cookie);
                console.log('CSRF Debug - Dominio corrente:', window.location.hostname);
                console.log('CSRF Debug - Input CSRF:', csrfInput ? csrfInput.value : 'NONE');
                
                return '';
            }
            
            showMessage(message, type = 'info') {
                this.messageDiv.textContent = message;
                this.messageDiv.className = `status ${type}`;
                this.messageDiv.style.display = 'block';
                
                // Nascondi dopo 5 secondi
                setTimeout(() => {
                    this.messageDiv.style.display = 'none';
                }, 5000);
            }
        }
        
        // Inizializza quando la pagina √® caricata
        document.addEventListener('DOMContentLoaded', () => {
            new PressReviewReader();
            new RatingSystem();

            // Pulsante per generazione statica (solo superadmin)
            const generateBtn = document.getElementById('generateStaticBtn');
            if (generateBtn) {
                generateBtn.addEventListener('click', function() {
                    generateBtn.disabled = true;
                    generateBtn.textContent = '‚è≥ Generazione..';
                    fetch('/tts/api/generate_static/', {
                        method: 'POST',
                        headers: {
                            'X-CSRFToken': document.querySelector('meta[name="csrf-token"]').getAttribute('content'),
                            'Content-Type': 'application/json',
                        },
                    })
                    .then(response => response.json())
                    .then(data => {
                        if (data.success) {
                            generateBtn.textContent = '‚úÖ Statico generato';
                            generateBtn.classList.remove('danger');
                            generateBtn.classList.add('success');
                        } else {
                            generateBtn.textContent = '‚ùå Errore';
                            generateBtn.disabled = false;
                            alert(data.error || 'Errore generazione statico');
                        }
                    })
                    .catch(err => {
                        generateBtn.textContent = '‚ùå Errore';
                        generateBtn.disabled = false;
                        alert('Errore generazione statico');
                    });
                });
            }
        });
    </script>
</body>
</html>